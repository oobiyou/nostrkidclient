{"version":3,"file":"compressor.esm.bf8af3ea.js","sources":["../../node_modules/compressorjs/dist/compressor.esm.js"],"sourcesContent":["/*!\n * Compressor.js v1.1.1\n * https://fengyuanchen.github.io/compressorjs\n *\n * Copyright 2018-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-10-05T02:32:40.212Z\n */\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar canvasToBlob = {exports: {}};\n\n/*\n * JavaScript Canvas to Blob\n * https://github.com/blueimp/JavaScript-Canvas-to-Blob\n *\n * Copyright 2012, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on stackoverflow user Stoive's code snippet:\n * http://stackoverflow.com/q/4998908\n */\n\n(function (module) {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  (function (window) {\n\n    var CanvasPrototype = window.HTMLCanvasElement && window.HTMLCanvasElement.prototype;\n\n    var hasBlobConstructor = window.Blob && function () {\n      try {\n        return Boolean(new Blob());\n      } catch (e) {\n        return false;\n      }\n    }();\n\n    var hasArrayBufferViewSupport = hasBlobConstructor && window.Uint8Array && function () {\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100;\n      } catch (e) {\n        return false;\n      }\n    }();\n\n    var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n    var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/;\n\n    var dataURLtoBlob = (hasBlobConstructor || BlobBuilder) && window.atob && window.ArrayBuffer && window.Uint8Array && function (dataURI) {\n      var matches, mediaType, isBase64, dataString, byteString, arrayBuffer, intArray, i, bb; // Parse the dataURI components as per RFC 2397\n\n      matches = dataURI.match(dataURIPattern);\n\n      if (!matches) {\n        throw new Error('invalid data URI');\n      } // Default to text/plain;charset=US-ASCII\n\n\n      mediaType = matches[2] ? matches[1] : 'text/plain' + (matches[3] || ';charset=US-ASCII');\n      isBase64 = !!matches[4];\n      dataString = dataURI.slice(matches[0].length);\n\n      if (isBase64) {\n        // Convert base64 to raw binary data held in a string:\n        byteString = atob(dataString);\n      } else {\n        // Convert base64/URLEncoded data component to raw binary:\n        byteString = decodeURIComponent(dataString);\n      } // Write the bytes of the string to an ArrayBuffer:\n\n\n      arrayBuffer = new ArrayBuffer(byteString.length);\n      intArray = new Uint8Array(arrayBuffer);\n\n      for (i = 0; i < byteString.length; i += 1) {\n        intArray[i] = byteString.charCodeAt(i);\n      } // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n\n\n      if (hasBlobConstructor) {\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n          type: mediaType\n        });\n      }\n\n      bb = new BlobBuilder();\n      bb.append(arrayBuffer);\n      return bb.getBlob(mediaType);\n    };\n\n    if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n      if (CanvasPrototype.mozGetAsFile) {\n        CanvasPrototype.toBlob = function (callback, type, quality) {\n          var self = this;\n          setTimeout(function () {\n            if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)));\n            } else {\n              callback(self.mozGetAsFile('blob', type));\n            }\n          });\n        };\n      } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n        if (CanvasPrototype.msToBlob) {\n          CanvasPrototype.toBlob = function (callback, type, quality) {\n            var self = this;\n            setTimeout(function () {\n              if ((type && type !== 'image/png' || quality) && CanvasPrototype.toDataURL && dataURLtoBlob) {\n                callback(dataURLtoBlob(self.toDataURL(type, quality)));\n              } else {\n                callback(self.msToBlob(type));\n              }\n            });\n          };\n        } else {\n          CanvasPrototype.toBlob = function (callback, type, quality) {\n            var self = this;\n            setTimeout(function () {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)));\n            });\n          };\n        }\n      }\n    }\n\n    if (module.exports) {\n      module.exports = dataURLtoBlob;\n    } else {\n      window.dataURLtoBlob = dataURLtoBlob;\n    }\n  })(window);\n})(canvasToBlob);\n\nvar toBlob = canvasToBlob.exports;\n\nvar isBlob = function isBlob(value) {\n  if (typeof Blob === 'undefined') {\n    return false;\n  }\n\n  return value instanceof Blob || Object.prototype.toString.call(value) === '[object Blob]';\n};\n\nvar DEFAULTS = {\n  /**\n   * Indicates if output the original image instead of the compressed one\n   * when the size of the compressed image is greater than the original one's\n   * @type {boolean}\n   */\n  strict: true,\n\n  /**\n   * Indicates if read the image's Exif Orientation information,\n   * and then rotate or flip the image automatically.\n   * @type {boolean}\n   */\n  checkOrientation: true,\n\n  /**\n   * The max width of the output image.\n   * @type {number}\n   */\n  maxWidth: Infinity,\n\n  /**\n   * The max height of the output image.\n   * @type {number}\n   */\n  maxHeight: Infinity,\n\n  /**\n   * The min width of the output image.\n   * @type {number}\n   */\n  minWidth: 0,\n\n  /**\n   * The min height of the output image.\n   * @type {number}\n   */\n  minHeight: 0,\n\n  /**\n   * The width of the output image.\n   * If not specified, the natural width of the source image will be used.\n   * @type {number}\n   */\n  width: undefined,\n\n  /**\n   * The height of the output image.\n   * If not specified, the natural height of the source image will be used.\n   * @type {number}\n   */\n  height: undefined,\n\n  /**\n   * Sets how the size of the image should be resized to the container\n   * specified by the `width` and `height` options.\n   * @type {string}\n   */\n  resize: 'none',\n\n  /**\n   * The quality of the output image.\n   * It must be a number between `0` and `1`,\n   * and only available for `image/jpeg` and `image/webp` images.\n   * Check out {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob canvas.toBlob}.\n   * @type {number}\n   */\n  quality: 0.8,\n\n  /**\n   * The mime type of the output image.\n   * By default, the original mime type of the source image file will be used.\n   * @type {string}\n   */\n  mimeType: 'auto',\n\n  /**\n   * Files whose file type is included in this list,\n   * and whose file size exceeds the `convertSize` value will be converted to JPEGs.\n   * @type {stringï½œArray}\n   */\n  convertTypes: ['image/png'],\n\n  /**\n   * PNG files over this size (5 MB by default) will be converted to JPEGs.\n   * To disable this, just set the value to `Infinity`.\n   * @type {number}\n   */\n  convertSize: 5000000,\n\n  /**\n   * The hook function to execute before draw the image into the canvas for compression.\n   * @type {Function}\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\n   * @example\n   * function (context, canvas) {\n   *   context.fillStyle = '#fff';\n   * }\n   */\n  beforeDraw: null,\n\n  /**\n   * The hook function to execute after drew the image into the canvas for compression.\n   * @type {Function}\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\n   * @example\n   * function (context, canvas) {\n   *   context.filter = 'grayscale(100%)';\n   * }\n   */\n  drew: null,\n\n  /**\n   * The hook function to execute when success to compress the image.\n   * @type {Function}\n   * @param {File} file - The compressed image File object.\n   * @example\n   * function (file) {\n   *   console.log(file);\n   * }\n   */\n  success: null,\n\n  /**\n   * The hook function to execute when fail to compress the image.\n   * @type {Function}\n   * @param {Error} err - An Error object.\n   * @example\n   * function (err) {\n   *   console.log(err.message);\n   * }\n   */\n  error: null\n};\n\nvar IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nvar WINDOW = IS_BROWSER ? window : {};\n\n/**\n * Check if the given value is a positive number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n */\n\nvar isPositiveNumber = function isPositiveNumber(value) {\n  return value > 0 && value < Infinity;\n};\nvar slice = Array.prototype.slice;\n/**\n * Convert array-like or iterable object to an array.\n * @param {*} value - The value to convert.\n * @returns {Array} Returns a new array.\n */\n\nfunction toArray(value) {\n  return Array.from ? Array.from(value) : slice.call(value);\n}\nvar REGEXP_IMAGE_TYPE = /^image\\/.+$/;\n/**\n * Check if the given value is a mime type of image.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given is a mime type of image, else `false`.\n */\n\nfunction isImageType(value) {\n  return REGEXP_IMAGE_TYPE.test(value);\n}\n/**\n * Convert image type to extension.\n * @param {string} value - The image type to convert.\n * @returns {boolean} Returns the image extension.\n */\n\nfunction imageTypeToExtension(value) {\n  var extension = isImageType(value) ? value.substr(6) : '';\n\n  if (extension === 'jpeg') {\n    extension = 'jpg';\n  }\n\n  return \".\".concat(extension);\n}\nvar fromCharCode = String.fromCharCode;\n/**\n * Get string from char code in data view.\n * @param {DataView} dataView - The data view for read.\n * @param {number} start - The start index.\n * @param {number} length - The read length.\n * @returns {string} The read result.\n */\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i;\n  length += start;\n\n  for (i = start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\nvar btoa = WINDOW.btoa;\n/**\n * Transform array buffer to Data URL.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n * @param {string} mimeType - The mime type of the Data URL.\n * @returns {string} The result Data URL.\n */\n\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\n  var chunks = [];\n  var chunkSize = 8192;\n  var uint8 = new Uint8Array(arrayBuffer);\n\n  while (uint8.length > 0) {\n    // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n    // eslint-disable-next-line prefer-spread\n    chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n    uint8 = uint8.subarray(chunkSize);\n  }\n\n  return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n}\n/**\n * Get orientation value from given array buffer.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n * @returns {number} The read orientation value.\n */\n\nfunction resetAndGetOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var orientation; // Ignores range error when the image does not have correct Exif information\n\n  try {\n    var littleEndian;\n    var app1Start;\n    var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n    if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n      var length = dataView.byteLength;\n      var offset = 2;\n\n      while (offset + 1 < length) {\n        if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n          app1Start = offset;\n          break;\n        }\n\n        offset += 1;\n      }\n    }\n\n    if (app1Start) {\n      var exifIDCode = app1Start + 4;\n      var tiffOffset = app1Start + 10;\n\n      if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n        var endianness = dataView.getUint16(tiffOffset);\n        littleEndian = endianness === 0x4949;\n\n        if (littleEndian || endianness === 0x4D4D\n        /* bigEndian */\n        ) {\n          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n            var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n            if (firstIFDOffset >= 0x00000008) {\n              ifdStart = tiffOffset + firstIFDOffset;\n            }\n          }\n        }\n      }\n    }\n\n    if (ifdStart) {\n      var _length = dataView.getUint16(ifdStart, littleEndian);\n\n      var _offset;\n\n      var i;\n\n      for (i = 0; i < _length; i += 1) {\n        _offset = ifdStart + i * 12 + 2;\n\n        if (dataView.getUint16(_offset, littleEndian) === 0x0112\n        /* Orientation */\n        ) {\n          // 8 is the offset of the current tag's value\n          _offset += 8; // Get the original orientation value\n\n          orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n          dataView.setUint16(_offset, 1, littleEndian);\n          break;\n        }\n      }\n    }\n  } catch (e) {\n    orientation = 1;\n  }\n\n  return orientation;\n}\n/**\n * Parse Exif Orientation value.\n * @param {number} orientation - The orientation to parse.\n * @returns {Object} The parsed result.\n */\n\nfunction parseOrientation(orientation) {\n  var rotate = 0;\n  var scaleX = 1;\n  var scaleY = 1;\n\n  switch (orientation) {\n    // Flip horizontal\n    case 2:\n      scaleX = -1;\n      break;\n    // Rotate left 180Â°\n\n    case 3:\n      rotate = -180;\n      break;\n    // Flip vertical\n\n    case 4:\n      scaleY = -1;\n      break;\n    // Flip vertical and rotate right 90Â°\n\n    case 5:\n      rotate = 90;\n      scaleY = -1;\n      break;\n    // Rotate right 90Â°\n\n    case 6:\n      rotate = 90;\n      break;\n    // Flip horizontal and rotate right 90Â°\n\n    case 7:\n      rotate = 90;\n      scaleX = -1;\n      break;\n    // Rotate left 90Â°\n\n    case 8:\n      rotate = -90;\n      break;\n  }\n\n  return {\n    rotate: rotate,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n/**\n * Normalize decimal number.\n * Check out {@link https://0.30000000000000004.com/}\n * @param {number} value - The value to normalize.\n * @param {number} [times=100000000000] - The times for normalizing.\n * @returns {number} Returns the normalized number.\n */\n\nfunction normalizeDecimalNumber(value) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n}\n/**\n * Get the max sizes in a rectangle under the given aspect ratio.\n * @param {Object} data - The original sizes.\n * @param {string} [type='contain'] - The adjust type.\n * @returns {Object} The result sizes.\n */\n\nfunction getAdjustedSizes(_ref) {\n  var aspectRatio = _ref.aspectRatio,\n      height = _ref.height,\n      width = _ref.width;\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'none';\n  var isValidWidth = isPositiveNumber(width);\n  var isValidHeight = isPositiveNumber(height);\n\n  if (isValidWidth && isValidHeight) {\n    var adjustedWidth = height * aspectRatio;\n\n    if ((type === 'contain' || type === 'none') && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n      height = width / aspectRatio;\n    } else {\n      width = height * aspectRatio;\n    }\n  } else if (isValidWidth) {\n    height = width / aspectRatio;\n  } else if (isValidHeight) {\n    width = height * aspectRatio;\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n\nvar ArrayBuffer$1 = WINDOW.ArrayBuffer,\n    FileReader = WINDOW.FileReader;\nvar URL = WINDOW.URL || WINDOW.webkitURL;\nvar REGEXP_EXTENSION = /\\.\\w+$/;\nvar AnotherCompressor = WINDOW.Compressor;\n/**\n * Creates a new image compressor.\n * @class\n */\n\nvar Compressor = /*#__PURE__*/function () {\n  /**\n   * The constructor of Compressor.\n   * @param {File|Blob} file - The target image file for compressing.\n   * @param {Object} [options] - The options for compressing.\n   */\n  function Compressor(file, options) {\n    _classCallCheck(this, Compressor);\n\n    this.file = file;\n    this.image = new Image();\n    this.options = _objectSpread2(_objectSpread2({}, DEFAULTS), options);\n    this.aborted = false;\n    this.result = null;\n    this.init();\n  }\n\n  _createClass(Compressor, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      var file = this.file,\n          options = this.options;\n\n      if (!isBlob(file)) {\n        this.fail(new Error('The first argument must be a File or Blob object.'));\n        return;\n      }\n\n      var mimeType = file.type;\n\n      if (!isImageType(mimeType)) {\n        this.fail(new Error('The first argument must be an image File or Blob object.'));\n        return;\n      }\n\n      if (!URL || !FileReader) {\n        this.fail(new Error('The current browser does not support image compression.'));\n        return;\n      }\n\n      if (!ArrayBuffer$1) {\n        options.checkOrientation = false;\n      }\n\n      if (URL && !options.checkOrientation) {\n        this.load({\n          url: URL.createObjectURL(file)\n        });\n      } else {\n        var reader = new FileReader();\n        var checkOrientation = options.checkOrientation && mimeType === 'image/jpeg';\n        this.reader = reader;\n\n        reader.onload = function (_ref) {\n          var target = _ref.target;\n          var result = target.result;\n          var data = {};\n\n          if (checkOrientation) {\n            // Reset the orientation value to its default value 1\n            // as some iOS browsers will render image with its orientation\n            var orientation = resetAndGetOrientation(result);\n\n            if (orientation > 1 || !URL) {\n              // Generate a new URL which has the default orientation value\n              data.url = arrayBufferToDataURL(result, mimeType);\n\n              if (orientation > 1) {\n                _extends(data, parseOrientation(orientation));\n              }\n            } else {\n              data.url = URL.createObjectURL(file);\n            }\n          } else {\n            data.url = result;\n          }\n\n          _this.load(data);\n        };\n\n        reader.onabort = function () {\n          _this.fail(new Error('Aborted to read the image with FileReader.'));\n        };\n\n        reader.onerror = function () {\n          _this.fail(new Error('Failed to read the image with FileReader.'));\n        };\n\n        reader.onloadend = function () {\n          _this.reader = null;\n        };\n\n        if (checkOrientation) {\n          reader.readAsArrayBuffer(file);\n        } else {\n          reader.readAsDataURL(file);\n        }\n      }\n    }\n  }, {\n    key: \"load\",\n    value: function load(data) {\n      var _this2 = this;\n\n      var file = this.file,\n          image = this.image;\n\n      image.onload = function () {\n        _this2.draw(_objectSpread2(_objectSpread2({}, data), {}, {\n          naturalWidth: image.naturalWidth,\n          naturalHeight: image.naturalHeight\n        }));\n      };\n\n      image.onabort = function () {\n        _this2.fail(new Error('Aborted to load the image.'));\n      };\n\n      image.onerror = function () {\n        _this2.fail(new Error('Failed to load the image.'));\n      }; // Match all browsers that use WebKit as the layout engine in iOS devices,\n      // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n\n      if (WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)) {\n        // Fix the `The operation is insecure` error (#57)\n        image.crossOrigin = 'anonymous';\n      }\n\n      image.alt = file.name;\n      image.src = data.url;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var _this3 = this;\n\n      var naturalWidth = _ref2.naturalWidth,\n          naturalHeight = _ref2.naturalHeight,\n          _ref2$rotate = _ref2.rotate,\n          rotate = _ref2$rotate === void 0 ? 0 : _ref2$rotate,\n          _ref2$scaleX = _ref2.scaleX,\n          scaleX = _ref2$scaleX === void 0 ? 1 : _ref2$scaleX,\n          _ref2$scaleY = _ref2.scaleY,\n          scaleY = _ref2$scaleY === void 0 ? 1 : _ref2$scaleY;\n      var file = this.file,\n          image = this.image,\n          options = this.options;\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var is90DegreesRotated = Math.abs(rotate) % 180 === 90;\n      var resizable = (options.resize === 'contain' || options.resize === 'cover') && isPositiveNumber(options.width) && isPositiveNumber(options.height);\n      var maxWidth = Math.max(options.maxWidth, 0) || Infinity;\n      var maxHeight = Math.max(options.maxHeight, 0) || Infinity;\n      var minWidth = Math.max(options.minWidth, 0) || 0;\n      var minHeight = Math.max(options.minHeight, 0) || 0;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var width = options.width,\n          height = options.height;\n\n      if (is90DegreesRotated) {\n        var _ref3 = [maxHeight, maxWidth];\n        maxWidth = _ref3[0];\n        maxHeight = _ref3[1];\n        var _ref4 = [minHeight, minWidth];\n        minWidth = _ref4[0];\n        minHeight = _ref4[1];\n        var _ref5 = [height, width];\n        width = _ref5[0];\n        height = _ref5[1];\n      }\n\n      if (resizable) {\n        aspectRatio = width / height;\n      }\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: maxWidth,\n        height: maxHeight\n      }, 'contain');\n\n      maxWidth = _getAdjustedSizes.width;\n      maxHeight = _getAdjustedSizes.height;\n\n      var _getAdjustedSizes2 = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: minWidth,\n        height: minHeight\n      }, 'cover');\n\n      minWidth = _getAdjustedSizes2.width;\n      minHeight = _getAdjustedSizes2.height;\n\n      if (resizable) {\n        var _getAdjustedSizes3 = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: width,\n          height: height\n        }, options.resize);\n\n        width = _getAdjustedSizes3.width;\n        height = _getAdjustedSizes3.height;\n      } else {\n        var _getAdjustedSizes4 = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: width,\n          height: height\n        });\n\n        var _getAdjustedSizes4$wi = _getAdjustedSizes4.width;\n        width = _getAdjustedSizes4$wi === void 0 ? naturalWidth : _getAdjustedSizes4$wi;\n        var _getAdjustedSizes4$he = _getAdjustedSizes4.height;\n        height = _getAdjustedSizes4$he === void 0 ? naturalHeight : _getAdjustedSizes4$he;\n      }\n\n      width = Math.floor(normalizeDecimalNumber(Math.min(Math.max(width, minWidth), maxWidth)));\n      height = Math.floor(normalizeDecimalNumber(Math.min(Math.max(height, minHeight), maxHeight)));\n      var destX = -width / 2;\n      var destY = -height / 2;\n      var destWidth = width;\n      var destHeight = height;\n      var params = [];\n\n      if (resizable) {\n        var srcX = 0;\n        var srcY = 0;\n        var srcWidth = naturalWidth;\n        var srcHeight = naturalHeight;\n\n        var _getAdjustedSizes5 = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: naturalWidth,\n          height: naturalHeight\n        }, {\n          contain: 'cover',\n          cover: 'contain'\n        }[options.resize]);\n\n        srcWidth = _getAdjustedSizes5.width;\n        srcHeight = _getAdjustedSizes5.height;\n        srcX = (naturalWidth - srcWidth) / 2;\n        srcY = (naturalHeight - srcHeight) / 2;\n        params.push(srcX, srcY, srcWidth, srcHeight);\n      }\n\n      params.push(destX, destY, destWidth, destHeight);\n\n      if (is90DegreesRotated) {\n        var _ref6 = [height, width];\n        width = _ref6[0];\n        height = _ref6[1];\n      }\n\n      canvas.width = width;\n      canvas.height = height;\n\n      if (!isImageType(options.mimeType)) {\n        options.mimeType = file.type;\n      }\n\n      var fillStyle = 'transparent'; // Converts PNG files over the `convertSize` to JPEGs.\n\n      if (file.size > options.convertSize && options.convertTypes.indexOf(options.mimeType) >= 0) {\n        options.mimeType = 'image/jpeg';\n      }\n\n      if (options.mimeType === 'image/jpeg') {\n        fillStyle = '#fff';\n      } // Override the default fill color (#000, black)\n\n\n      context.fillStyle = fillStyle;\n      context.fillRect(0, 0, width, height);\n\n      if (options.beforeDraw) {\n        options.beforeDraw.call(this, context, canvas);\n      }\n\n      if (this.aborted) {\n        return;\n      }\n\n      context.save();\n      context.translate(width / 2, height / 2);\n      context.rotate(rotate * Math.PI / 180);\n      context.scale(scaleX, scaleY);\n      context.drawImage.apply(context, [image].concat(params));\n      context.restore();\n\n      if (options.drew) {\n        options.drew.call(this, context, canvas);\n      }\n\n      if (this.aborted) {\n        return;\n      }\n\n      var done = function done(result) {\n        if (!_this3.aborted) {\n          _this3.done({\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            result: result\n          });\n        }\n      };\n\n      if (canvas.toBlob) {\n        canvas.toBlob(done, options.mimeType, options.quality);\n      } else {\n        done(toBlob(canvas.toDataURL(options.mimeType, options.quality)));\n      }\n    }\n  }, {\n    key: \"done\",\n    value: function done(_ref7) {\n      var naturalWidth = _ref7.naturalWidth,\n          naturalHeight = _ref7.naturalHeight,\n          result = _ref7.result;\n      var file = this.file,\n          image = this.image,\n          options = this.options;\n\n      if (URL && !options.checkOrientation) {\n        URL.revokeObjectURL(image.src);\n      }\n\n      if (result) {\n        // Returns original file if the result is greater than it and without size related options\n        if (options.strict && result.size > file.size && options.mimeType === file.type && !(options.width > naturalWidth || options.height > naturalHeight || options.minWidth > naturalWidth || options.minHeight > naturalHeight || options.maxWidth < naturalWidth || options.maxHeight < naturalHeight)) {\n          result = file;\n        } else {\n          var date = new Date();\n          result.lastModified = date.getTime();\n          result.lastModifiedDate = date;\n          result.name = file.name; // Convert the extension to match its type\n\n          if (result.name && result.type !== file.type) {\n            result.name = result.name.replace(REGEXP_EXTENSION, imageTypeToExtension(result.type));\n          }\n        }\n      } else {\n        // Returns original file if the result is null in some cases.\n        result = file;\n      }\n\n      this.result = result;\n\n      if (options.success) {\n        options.success.call(this, result);\n      }\n    }\n  }, {\n    key: \"fail\",\n    value: function fail(err) {\n      var options = this.options;\n\n      if (options.error) {\n        options.error.call(this, err);\n      } else {\n        throw err;\n      }\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (!this.aborted) {\n        this.aborted = true;\n\n        if (this.reader) {\n          this.reader.abort();\n        } else if (!this.image.complete) {\n          this.image.onload = null;\n          this.image.onabort();\n        } else {\n          this.fail(new Error('The compression process has been aborted.'));\n        }\n      }\n    }\n    /**\n     * Get the no conflict compressor class.\n     * @returns {Compressor} The compressor class.\n     */\n\n  }], [{\n    key: \"noConflict\",\n    value: function noConflict() {\n      window.Compressor = AnotherCompressor;\n      return Compressor;\n    }\n    /**\n     * Change the default options.\n     * @param {Object} options - The new default options.\n     */\n\n  }, {\n    key: \"setDefaults\",\n    value: function setDefaults(options) {\n      _extends(DEFAULTS, options);\n    }\n  }]);\n\n  return Compressor;\n}();\n\nexport { Compressor as default };\n"],"names":["ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","i","source","key","_defineProperty","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","obj","value","_extends","canvasToBlob","module","window","CanvasPrototype","hasBlobConstructor","hasArrayBufferViewSupport","BlobBuilder","dataURIPattern","dataURLtoBlob","dataURI","matches","mediaType","isBase64","dataString","byteString","arrayBuffer","intArray","bb","callback","type","quality","self","toBlob","isBlob","DEFAULTS","IS_BROWSER","WINDOW","isPositiveNumber","slice","toArray","REGEXP_IMAGE_TYPE","isImageType","imageTypeToExtension","extension","fromCharCode","getStringFromCharCode","dataView","start","length","str","btoa","arrayBufferToDataURL","mimeType","chunks","chunkSize","uint8","resetAndGetOrientation","orientation","littleEndian","app1Start","ifdStart","offset","exifIDCode","tiffOffset","endianness","firstIFDOffset","_length","_offset","parseOrientation","rotate","scaleX","scaleY","REGEXP_DECIMALS","normalizeDecimalNumber","times","getAdjustedSizes","_ref","aspectRatio","height","width","isValidWidth","isValidHeight","adjustedWidth","ArrayBuffer$1","FileReader","URL","REGEXP_EXTENSION","AnotherCompressor","Compressor","file","options","_this","reader","checkOrientation","result","data","_this2","image","_ref2","_this3","naturalWidth","naturalHeight","_ref2$rotate","_ref2$scaleX","_ref2$scaleY","canvas","context","is90DegreesRotated","resizable","maxWidth","maxHeight","minWidth","minHeight","_ref3","_ref4","_ref5","_getAdjustedSizes","_getAdjustedSizes2","_getAdjustedSizes3","_getAdjustedSizes4","_getAdjustedSizes4$wi","_getAdjustedSizes4$he","destX","destY","destWidth","destHeight","params","srcX","srcY","srcWidth","srcHeight","_getAdjustedSizes5","_ref6","fillStyle","done","_ref7","date","err"],"mappings":"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"}